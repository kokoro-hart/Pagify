class Pagination{targetRoot;targetNodes;pageCounterWrap;buttonPrev;buttonNext;perPage;pageRangeDisplayed;isChooseUp;currentPagerEl;totalPage;totalContent;_perPage;currentPager;indexStart;indexEnd;_pageRangeDisplayed;isHistory;isEllipsis;ellipsisText;pageNumberEl;pageNumberTag;pageNumberHref;_isChooseUp;nextMassage;prevMassage;bulletMessage;firstPageMessage;lastPageMessage;breakpoint;onPageChange;onClickNext;onClickPrev;onClickNumber;onBeforeMount;onMounted;constructor(e,{contentItem:t=".pagininze-item",perPage:s=5,isNextPrev:i=!0,isHistory:a=!0,pageRangeDisplayed:r=5,isEllipsis:n=!0,ellipsisText:o=". . .",prevEl:g=".pagininze-prev",nextEl:h=".pagininze-next",pageNumberWrapEl:l=".pagininze-counter",pageNumberEl:u=".pagininze-number",pageNumberTag:p="button",pageNumberHref:c="",isChooseUp:d=!1,nextMassage:P="Go to next page",prevMassage:b="Go to prev page",bulletMessage:C="Go to page {{count}}",firstPageMessage:v="This is first page",lastPageMessage:N="This is last page",breakpoint:f={minWidth:768},onPageChange:x,onClickNext:m,onClickPrev:E,onClickNumber:M,onBeforeMount:y,onMounted:k}){Object.assign(this,{perPage:s,isNextPrev:i,isHistory:a,pageRangeDisplayed:r,isEllipsis:n,ellipsisText:o,pageNumberEl:u,pageNumberTag:p,pageNumberHref:c,isChooseUp:d,nextMassage:P,prevMassage:b,bulletMessage:C,firstPageMessage:v,lastPageMessage:N,breakpoint:f,onPageChange:x,onClickNext:m,onClickPrev:E,onClickNumber:M,onBeforeMount:y,onMounted:k}),y&&this.onBeforeMount(),this.targetRoot=document.querySelector(e),this.targetRoot&&(this.targetNodes=this.targetRoot.querySelectorAll(t),this.pageCounterWrap=this.targetRoot.querySelector(l),i&&(this.buttonPrev=this.targetRoot.querySelector(g),this.buttonNext=this.targetRoot.querySelector(h)),this.currentPagerEl=null,this.init(),this.targetNodes&&(this.totalContent=this.targetNodes.length,this.totalPage=Math.ceil(this.totalContent/this._perPage),this.registerEvents(),0===this.totalContent&&window.location.reload(),k&&this.onMounted()))}init(){const e=e=>{e.matches?(this._perPage=this.breakpoint.perPage?this.breakpoint.perPage:this.perPage,this._pageRangeDisplayed=this.breakpoint.pageRangeDisplayed?this.breakpoint.pageRangeDisplayed:this.pageRangeDisplayed,this._isChooseUp=this.breakpoint.isChooseUp?this.breakpoint.isChooseUp:this.isChooseUp,this.initConstructor(),this.initQueryParams()):(this._perPage=this.perPage,this._pageRangeDisplayed=this.pageRangeDisplayed,this._isChooseUp=this.isChooseUp,this.initConstructor(),this.initQueryParams())},t=window.matchMedia(`(min-width: ${this.breakpoint.minWidth}px)`);t.onchange=e,e(t)}initConstructor(){this.pageCounterWrap&&this.targetNodes&&(this.pageCounterWrap.innerHTML="",this.currentPager=0,this.indexStart=0,this.indexEnd=0,this.totalPage=Math.ceil(this.targetNodes.length/this._perPage))}initQueryParams(){if(!this.isHistory)return this.updatePageState(),void this.updateCurrentButton();const e=new URLSearchParams(window.location.search).get("paged");null===e||"0"===e?(this.updatePageState(),this.updateCurrentButton()):this.updatePageState(Number(e))}registerEvents(){this.buttonNext&&this.buttonPrev&&(this.buttonNext.addEventListener("click",(()=>{this.updatePageState(this.currentPager+=1),void 0!==this.onPageChange&&this.onPageChange(this.currentPager),void 0!==this.onClickNext()&&this.onClickNext()})),this.buttonPrev.addEventListener("click",(()=>{this.updatePageState(this.currentPager-=1),void 0!==this.onPageChange&&this.onPageChange(this.currentPager),void 0!==this.onClickPrev()&&this.onClickPrev()})))}activateButtonPrev(){this.buttonPrev&&(this.buttonPrev.dataset.disable="false",this.buttonPrev.style.pointerEvents="auto",this.buttonPrev.setAttribute("aria-label",this.prevMassage))}activateButtonNext(){this.buttonNext&&(this.buttonNext.dataset.disable="false",this.buttonNext.style.pointerEvents="auto",this.buttonNext.setAttribute("aria-label",this.nextMassage))}disabledButtonPrev(){this.buttonPrev&&(this.buttonPrev.dataset.disable="true",this.buttonPrev.style.pointerEvents="none",this.buttonPrev.removeAttribute("aria-label"))}disabledButtonNext=()=>{this.buttonNext&&(this.buttonNext.dataset.disable="true",this.buttonNext.style.pointerEvents="none",this.buttonNext.removeAttribute("aria-label"))};updateCurrentButton(e=1){this.currentPagerEl=document.querySelector(`.pagininze-number[data-counter-id="${e}"]`),this.currentPagerEl?.setAttribute("data-current","true")}updateContentsView(e,t){if(!this.targetNodes)return;this.indexStart=e*t-t,this.indexEnd=e*t-1;const s=[];for(let e=this.indexStart;e<this.indexEnd+1;e+=1)s.push(e);this.targetNodes.forEach((e=>{e.style.display="none"})),this.targetNodes.forEach(((e,t)=>{-1!==s.indexOf(t)&&(e.style.display="block")}))}updatePageState(e){if(this.pageCounterWrap){if(1===e||void 0===e||1===this.currentPager?(this.currentPager=1,this.activateButtonNext(),this.disabledButtonPrev()):e===this.totalPage?(this.currentPager=e,this.disabledButtonNext(),this.activateButtonPrev()):(this.currentPager=e,this.activateButtonNext(),this.activateButtonPrev()),1===this.totalPage&&(this.disabledButtonNext(),this.disabledButtonPrev()),this.updateContentsView(this.currentPager,this._perPage),this.pageCounterWrap.innerHTML="",this.createPageCounter(this.currentPager,this.totalPage),this.isHistory){const e=new URLSearchParams({paged:String(this.currentPager)}),t=new URL(window.location.href);t.search=e.toString(),window.history.replaceState({},"",t.toString())}this.updateCurrentButton(e),document.querySelectorAll(this.pageNumberEl).forEach((e=>{e.addEventListener("click",(()=>{this.currentPager=Number(e.getAttribute("data-counter-id")),this.updatePageState(this.currentPager),void 0!==this.onPageChange&&this.onPageChange(this.currentPager),void 0!==this.onClickNumber&&this.onClickNumber()}))}))}}createPageCounter(e,t){if(this.isEllipsis)this.createPageCounterWithEllipsis(e,t);else for(let e=1;e<=t;e+=1)this.createPagerEls(e)}createPagerEls(e){if(!this.pageCounterWrap)return;const t=document.createElement(`${this.pageNumberHref?"a":this.pageNumberTag}`);if(this.pageNumberHref&&t.setAttribute("href",`${this.pageNumberHref}${e}`),"button"===this.pageNumberTag&&t.setAttribute("type","button"),t.setAttribute("data-counter-id",String(e)),e===this.totalPage)t.setAttribute("aria-label",`${this.lastPageMessage}`);else if(1===e)t.setAttribute("aria-label",`${this.firstPageMessage}`);else{const s=this.bulletMessage.replace("{{count}}",String(e));t.setAttribute("aria-label",s)}t.classList.add(this.pageNumberEl.replace(".","")),t.textContent=String(e),this.pageCounterWrap.appendChild(t)}createPageCounterWithEllipsis(e,t){const s=()=>{if(!this.pageCounterWrap)return;const e=document.createElement("span");e.classList.add("pagininze-ellipsis"),e.innerHTML=this.ellipsisText,this.pageCounterWrap.appendChild(e)};if(t>this._pageRangeDisplayed&&this._pageRangeDisplayed>4){const i=1;if(6===t)for(let e=1;e<=t;e+=1)this.createPagerEls(e);else if(e<=4){const a=this._isChooseUp?2:1;for(let t=i;t<=e+a;t+=1)this.createPagerEls(t);e<t-2&&s(),this.createPagerEls(t)}else if(e>=t-2){for(let e=i;e<=2;e+=1)this.createPagerEls(e);s();for(let e=t-3;e<=t;e+=1)this.createPagerEls(e)}else{for(let e=i;e<=1;e+=1)this.createPagerEls(e);s();const a=this._isChooseUp?2:1;for(let t=e-a;t<=e+a;t+=1)this.createPagerEls(t);s(),this.createPagerEls(t)}}else for(let e=1;e<=t;e+=1)this.createPagerEls(e)}}const paginationDefault=()=>{new Pagination(".pagininze",{nextMassage:"次へ進む",prevMassage:"前へ戻る",bulletMessage:"ページ{{count}}へ移動",firstPageMessage:"最初のページです",lastPageMessage:"最後のページです",isChooseUp:!0})};function App(){new Pagination(".pagininze",{nextMassage:"次へ進む",prevMassage:"前へ戻る",bulletMessage:"ページ{{count}}へ移動",firstPageMessage:"最初のページです",lastPageMessage:"最後のページです",isChooseUp:!0})}App();w
